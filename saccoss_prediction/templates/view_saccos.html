{% extends "base.html" %} {% block head %} {{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename= 'extended_beauty.css') }}" />
{% endblock %} {% block content %}

<!---Containerize main page for styling--->
<div class="page">
    <!---Containerize paragraph and form for styling--->
    <div class="container">

        <div class="alert alert-success" role="alert">
            <h5> {{ 'DETAILED EVALUATION OF %s' % saccos.name }} </h5>
        </div>

        <!-- Tabs navs -->
        <ul class="nav nav-tabs mb-3" id="ex1" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="ex1-tab-1" data-toggle="tab" data-mdb-toggle="tab" href="#ex1-tabs-1"
                    role="tab" aria-controls="ex1-tabs-1" aria-selected="true">Performance Trend</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="ex1-tab-2" data-toggle="tab" data-mdb-toggle="tab" href="#ex1-tabs-2" role="tab"
                    aria-controls="ex1-tabs-2" aria-selected="false">Model summary</a>
            </li>
        </ul>
        <!-- Tabs navs -->

        <!-- Tabs content -->
        <div class="tab-content" id="ex1-content">

            <div class="tab-pane fade show active" id="ex1-tabs-1" role="tabpanel" aria-labelledby="ex1-tab-1">
                <div class="card mb-2">
                    <div class="card-body">
                        <div class="table-responsive">
                            {{ data.to_html(classes='table table-bordered table-sm', table_id="dataTable", float_format='{:10.2f}'.format, index=False, render_links=True) | safe }}
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="ex1-tabs-2" role="tabpanel" aria-labelledby="ex1-tab-2">
                <div class="card mb-2">
                    <div class="card-body">
                        <div class="intro">
                            <b>
                                <p class="Note">
                                    Note:
                                    <ul>
                                        <li>
                                            The model in a row with the dark background is the best choice that is used
                                            to generate the prediction model
                                        </li>
                                        <li>
                                            R^2 (R2 Squared): Ranges from 0 to 1, the closer the value to 1,
                                            the more perfectly the model is trained
                                        </li>
                                        <li>
                                            MAE (Mean Absolute Error): Measures how far the predictions are from the
                                            actual output. The lower the value the better, and 0 means the model is
                                            perfect
                                        </li>
                                        <li>
                                            RMSE (Root Mean Squared Error): Tells the average distance between the
                                            predicted values from the model and the actual values in the dataset. The
                                            lower the RMSE, the better a given model is able to fit a dataset
                                        </li>
                                    </ul>
                                </p>
                            </b>
                        </div>
                        <ul class="list-group">
                            {% for key, value in outcomes.items() %}
                            <div class="card mb-2">
                                <li
                                    class="list-group-item list-group-item-action list-group-item-success d-flex justify-content-between align-items-center mb-1">
                                    <a data-toggle="collapse" class="text-info" href="javascript:void(0)">
                                        <span data-feather="folder"></span>{{ value }}
                                    </a>
                                </li>
                                <div class="table-responsive">
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="card mb-2">
                                                    <div class="card-header">
                                                        LIST OF MODEL TESTED
                                                    </div>
                                                    <div class="card-body table-responsive">
                                                        <table class="table table-bordered table-sm"
                                                            id="dataTable{{key}}" width="100%" cellspacing="0">
                                                            <thead>
                                                                <tr>
                                                                    <th scope="col">Model</th>
                                                                    <th scope="col">R^2</th>
                                                                    <th scope="col">MAE</th>
                                                                    <th scope="col">RMSE</th>
                                                                    <th scope="col">Date Generated</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                {% for s in saccos.prediction_models %}
                                                                {% if s.performance_criteria == value %}
                                                                <tr class="{{ 'table-active' if s.selected else '' }}">
                                                                    <td>{{ s.model_used }}</td>
                                                                    <td>{{ s.r2_score }}</td>
                                                                    <td>{{ s.mean_absolute_error }}</td>
                                                                    <td>{{ s.root_mean_squared_error }}</td>
                                                                    <td>{{ s.date_created.strftime("%Y-%m-%d at %H:%m:%S") }}
                                                                    </td>
                                                                </tr>
                                                                {% endif %}
                                                                {% endfor %}
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="card">
                                                    <div class="card-header">
                                                        ACTTUAL V/S PREDICTED
                                                    </div>
                                                    <div class="card-body table-responsive">
                                                        {% if value == 'capital-adequacy' %}
                                                        {{ capital.to_html(classes='table table-bordered table-sm', table_id="dataTablee1",
                                                    float_format='{:10.2f}'.format, index=False, render_links=True) |
                                                    safe }}

                                                        {% elif value == 'asset-quality-01' %}
                                                        {{ asset_1.to_html(classes='table table-bordered table-sm', table_id="dataTablee2",
                                                    float_format='{:10.2f}'.format, index=False, render_links=True) |
                                                    safe }}

                                                        {% elif value == 'asset-quality-02' %}
                                                        {{ asset_1.to_html(classes='table table-bordered table-sm', table_id="dataTablee3",
                                                    float_format='{:10.2f}'.format, index=False, render_links=True) |
                                                    safe }}

                                                        {% elif value == 'asset-quality-03' %}
                                                        {{ asset_1.to_html(classes='table table-bordered table-sm', table_id="dataTablee4",
                                                    float_format='{:10.2f}'.format, index=False, render_links=True) |
                                                    safe }}

                                                        {% elif value == 'asset-quality-04' %}
                                                        {{ asset_1.to_html(classes='table table-bordered table-sm', table_id="dataTablee5",
                                                    float_format='{:10.2f}'.format, index=False, render_links=True) |
                                                    safe }}

                                                        {% else %}
                                                        {{ 'Null'}}

                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </ul>
                    </div>

                    <!-- {% for summary2 in model_summary %}
                    <a href="#">{{ summary2.performance_criteria }}</a> <br>
                    {% for summary3 in summary2.performance_criteria %}
                    {{summary3}}
                    {% if summary3 == summary2.performance_criteria %}
                    <a href="#">jjjj</a> <br>
                    {% endif %}
                    {% endfor %}
                    {% endfor %} -->
                </div>
            </div>
        </div>
        <!-- Tabs content -->

        <!-- {% if texts is defined %}
        {% for text in texts %}
        <div>{{ error }}</div>
        <div class="post">
            <div class="post-title">{{ text.subject }}</div>
            <pre class="post-content">{{ text.content }}</pre>
        </div>
        {% endfor %}
        {% else %}
        Error!
        {% endif %} -->


    </div>
</div>
<!-- </center> -->


{% endblock %}